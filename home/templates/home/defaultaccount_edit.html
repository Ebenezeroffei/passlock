{% extends 'home/base.html' %}


{% block head %}
	<title>Edit {{object.account_name}}</title>
{% endblock %}
{% block content %}
	<div class="container" style="margin-top:80px">
		<div id="verification-container" style="max-width:400px;margin:auto">
			<p class="text-info">You need to be verified as the actual user before you can edit the account.</p>
			<div class="form-group">
				<label for="password">Password:</label>
				<input id="password" type="password" class = 'form-control' />
			</div>
			<button id="verify" type="button" class="btn btn-primary btn-block">Verify</button>
		</div>
	</div>
{% endblock %}
{% block javascript %}
	<script>
		// A function that verifies a user before editing an account
		let verifyUser = () => {
			$('#verify').click(function(){
				let password = $('#password').val();
				console.log("Hmmm")
				$.ajax({
					url: "{% url 'passlock:verify' %}",
					data: {
						'password':password,
					},
					dataType: 'json',
					success: function(data){
						if(data['user_status']){
							$('#password').attr('class','form-control border-success');
							$('#verify').attr('class','btn btn-success btn-block');
							$('#verify').text('Verified');
							$('#verification-container').slideUp('slow',function(){
								$(this).remove();
							})
						}
						else{
							$('#password').attr('class','form-control border-danger');
						}
					},
				})
			})
		}
		verifyUser() //Invoke function
	</script>
{% endblock %}